[global]
# Repository configuration for S3
repo1-type=s3
repo1-s3-region=ap-southeast-2
repo1-s3-endpoint=s3.ap-southeast-2.amazonaws.com
repo1-s3-bucket=jig-ho-cottage-dr
repo1-path=/pi-hosting/database

# Note: AWS credentials provided via environment variables:
# PGBACKREST_REPO1_S3_KEY and PGBACKREST_REPO1_S3_KEY_SECRET

# Retention policy
# Keep 52 weekly full backups (12 months) and 7 days of differentials
# IMPORTANT: If you change these values, also update the monitoring check in:
#   backups/monitoring/scripts/check-postgres-backup.sh (expected_max_age_days)
repo1-retention-full=52
repo1-retention-diff=7

# Logging
log-level-console=info
log-level-file=detail

# Performance optimizations
compress-type=zst
repo1-bundle=y
repo1-block=y
process-max=2
start-fast=y

[main]
# PostgreSQL configuration - running in same container
pg1-path=/var/lib/postgresql/data
pg1-user=postgres
pg1-socket-path=/var/run/postgresql
