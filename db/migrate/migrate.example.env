# ============================================================================
# Database Migration Configuration
# ============================================================================
# This file contains connection details for database migration.
# Set SOURCE_* for the database you're migrating FROM
# Set TARGET_* for the database you're migrating TO
#
# Usage:
#   cp migrate.example.env migrate_pi_to_do.env  # or migrate_do_to_pi.env
#   # Edit the file with your credentials
#   bash db/migrate_db.sh --direction pi-to-do --config migrate_pi_to_do.env
# ============================================================================

# Database & Schema
# ----------------------------------------------------------------------------
DB_NAME=your_database_name
SCHEMA_NAME=public

# Source Database Connection (database you're migrating FROM)
# ----------------------------------------------------------------------------
# Example for Pi→DO: These would be your Pi credentials
# Example for DO→Pi: These would be your DO credentials
SOURCE_HOST=192.168.1.100
SOURCE_PORT=5432
SOURCE_USER=postgres
SOURCE_PASS=your_source_password
SOURCE_SSLMODE=prefer
SOURCE_ADMIN_DB=postgres
SOURCE_APP_ROLE=app_user

# Target Database Connection (database you're migrating TO)
# ----------------------------------------------------------------------------
# Example for Pi→DO: These would be your DO credentials
# Example for DO→Pi: These would be your Pi credentials
TARGET_HOST=your-cluster.db.ondigitalocean.com
TARGET_PORT=25060
TARGET_USER=doadmin
TARGET_PASS=your_target_password
TARGET_SSLMODE=require
TARGET_ADMIN_DB=defaultdb
TARGET_APP_ROLE=app_user
TARGET_APP_ROLE_PASSWORD=your_secure_app_password

# Migration Settings (optional overrides)
# ----------------------------------------------------------------------------
# WAIT_SLEEP=2                    # Seconds between session drain checks
# WAIT_MAX_ATTEMPTS=0             # Max session drain attempts (0=infinite)
# PG_RESTORE_JOBS=4               # Parallel restore jobs
# PG_DUMP_BIN=pg_dump             # Custom pg_dump binary path
# PG_RESTORE_BIN=pg_restore       # Custom pg_restore binary path

# Notes:
# - All connection parameters are required (no defaults)
# - SOURCE_* = where data comes FROM, TARGET_* = where data goes TO
# - SOURCE_APP_ROLE must exist on source; TARGET_APP_ROLE will be created with LOGIN capability
# - TARGET_APP_ROLE_PASSWORD is required - creates a login-capable role for the application
# - Source database will be renamed to {DB_NAME}_migrated_{TIMESTAMP} after success
# - Passwords can be omitted if using .pgpass file or environment variables
# - Create separate config files for each direction if you migrate regularly
